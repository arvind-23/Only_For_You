<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>For Megha ‚ù§Ô∏è</title>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Poppins:wght@400;600&family=Montserrat:wght@800&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
    <style>
        :root {
            --primary-pink: #ff4d6d;
            --bg-light: #fff0f3;
            --text-dark: #2d3436;
            --heart-gradient: linear-gradient(45deg, #ff4d6d, #ff758c);
        }

        body {
            margin: 0; padding: 0;
            display: flex; justify-content: center; align-items: center;
            min-height: 100vh; background-color: var(--bg-light);
            font-family: 'Poppins', sans-serif; overflow: hidden;
            touch-action: manipulation;
        }

        /* --- ENTRANCE --- */
        #reveal-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: var(--bg-light); z-index: 1000;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            transition: opacity 0.8s ease;
        }

        .elegant-heart {
            position: relative; width: 140px; height: 125px;
            cursor: pointer; animation: throb 2.5s infinite ease-in-out;
        }
        .elegant-heart:before, .elegant-heart:after {
            content: ""; position: absolute; left: 70px; top: 0;
            width: 70px; height: 115px; background: var(--heart-gradient);
            border-radius: 70px 70px 0 0; transform: rotate(-45deg); transform-origin: 0 100%;
        }
        .elegant-heart:after { left: 0; transform: rotate(45deg); transform-origin: 100% 100%; }

        @keyframes throb { 0%, 100% { transform: scale(1); } 45% { transform: scale(1.15); } }

        .entrance-text {
            margin-top: 40px; font-family: 'Dancing Script', cursive; 
            color: var(--primary-pink); font-size: 2.5rem; font-weight: 800;
        }

        /* --- CARD & BUTTONS --- */
        #main-card {
            background: white; padding: 30px; border-radius: 30px;
            box-shadow: 0 15px 45px rgba(255, 77, 109, 0.2);
            z-index: 10; max-width: 400px; width: 85%; min-height: 450px;
            display: none; position: relative; text-align: center;
        }

        .btn-container { margin-top: 40px; position: relative; height: 150px; display: flex; justify-content: center; gap: 20px; }
        
        button {
            padding: 12px 30px; font-size: 0.9rem; border: none; border-radius: 12px;
            cursor: pointer; font-weight: 600; font-family: 'Montserrat', sans-serif;
            text-transform: uppercase;
        }

        #yesBtn { background: var(--text-dark); color: white; position: relative; z-index: 1; }
        #noBtn { 
            background: #f0f0f0; color: var(--text-dark); position: relative; z-index: 2; 
            -webkit-tap-highlight-color: transparent;
        }

        /* --- CAROUSEL --- */
        #success-screen { display: none; }
        .carousel-container {
            position: relative; width: 280px; height: 380px;
            margin: 20px auto; background: white; padding: 10px 10px 40px 10px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1); transform: rotate(-1deg);
        }
        .carousel-slide {
            position: absolute; top: 10px; left: 10px; width: 280px; height: 300px;
            opacity: 0; transition: opacity 0.8s; cursor: pointer;
            -webkit-tap-highlight-color: transparent;
        }
        .carousel-slide.active { opacity: 1; z-index: 5; }
        .carousel-slide img { 
            width: 100%; height: 100%; object-fit: cover; 
            pointer-events: none; -webkit-touch-callout: none;
        }
        
        .note-reveal {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(255, 77, 109, 0.95); color: white;
            display: flex; justify-content: center; align-items: center;
            padding: 20px; font-family: 'Dancing Script', cursive; font-size: 1.6rem;
            opacity: 0; transition: opacity 0.3s; pointer-events: none;
        }
        .carousel-slide.active-note .note-reveal { opacity: 1; }

        .wa-link {
            margin-top: 20px; display: inline-block; color: var(--primary-pink);
            font-weight: 700; text-decoration: none; border-bottom: 2px solid var(--primary-pink);
            font-size: 0.8rem; letter-spacing: 1px;
        }

        .hearts-bg { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; pointer-events: none; }
    </style>
</head>
<body>

    <div id="reveal-overlay" onclick="revealPage()">
        <div class="elegant-heart"></div>
        <div class="entrance-text">For You, Megha</div>
    </div>

    <div class="hearts-bg" id="hearts-bg"></div>
    <audio id="beforeMusic" loop><source src="before_music.mp3" type="audio/mpeg"></audio>
    <audio id="afterMusic" loop><source src="after_music.mp3" type="audio/mpeg"></audio>

    <div id="main-card">
        <div id="question-area">
            <h1 style="color:var(--primary-pink); font-family:'Dancing Script';">Will you be my Valentine? üåπ</h1>
            <div class="btn-container">
                <button id="yesBtn" onclick="celebrate()">Yes</button>
                <button id="noBtn">No</button>
            </div>
        </div>

        <div id="success-screen">
            <h1 style="color:var(--primary-pink); font-family:'Dancing Script';">I love you, Megha! ‚ù§Ô∏è</h1>
            <div class="carousel-container">
                <div class="carousel-slide active" onclick="toggleNote(this)">
                    <img src="img1.jpg"><div class="note-reveal">You are my favorite memory.</div>
                </div>
                <div class="carousel-slide" onclick="toggleNote(this)">
                    <img src="img2.jpg"><div class="note-reveal">Every day with you is a gift.</div>
                </div>
                <div class="carousel-slide" onclick="toggleNote(this)">
                    <img src="img3.jpg"><div class="note-reveal">To a lifetime of Us. ‚ù§Ô∏è</div>
                </div>
            </div>
            <p style="font-size:0.7rem; color:#999;">(Tap images to read my notes)</p>
            <a href="#" class="wa-link" onclick="sendWhatsApp()">CONFIRM ON WHATSAPP</a>
        </div>
    </div>

    <script>
        const beforeMusic = document.getElementById('beforeMusic');
        const afterMusic = document.getElementById('afterMusic');
        const noBtn = document.getElementById('noBtn');
        const card = document.getElementById('main-card');
        const slides = document.querySelectorAll('.carousel-slide');
        
        let carouselTimer;
        let currentIndex = 0;
        let isCelebrated = false;

        function revealPage() {
            document.getElementById('reveal-overlay').style.opacity = '0';
            setTimeout(() => {
                document.getElementById('reveal-overlay').style.display = 'none';
                document.getElementById('main-card').style.display = 'block';
                beforeMusic.play().catch(() => {});
            }, 800);
        }

        // --- THE RUNAWAY BUTTON (GHOST CLICK FIXED) ---
        function moveNoButton(e) {
            if (e) e.preventDefault(); 
            noBtn.style.position = 'absolute';
            const maxX = card.offsetWidth - noBtn.offsetWidth - 20;
            const maxY = card.offsetHeight - noBtn.offsetHeight - 20;
            noBtn.style.left = Math.random() * maxX + 'px';
            noBtn.style.top = Math.random() * maxY + 'px';
        }
        noBtn.addEventListener('touchstart', moveNoButton, {passive: false});
        noBtn.addEventListener('mouseover', moveNoButton);

        // --- CAROUSEL & NOTES ---
        function toggleNote(el) {
            if (el.classList.contains('active-note')) {
                el.classList.remove('active-note');
                resumeCarousel();
            } else {
                stopCarousel();
                slides.forEach(s => s.classList.remove('active-note'));
                el.classList.add('active-note');
            }
        }

        function resumeCarousel() {
            if (carouselTimer) clearInterval(carouselTimer);
            carouselTimer = setInterval(() => {
                if (!document.querySelector('.active-note')) {
                    slides[currentIndex].classList.remove('active');
                    currentIndex = (currentIndex + 1) % slides.length;
                    slides[currentIndex].classList.add('active');
                }
            }, 3000);
        }

        function stopCarousel() { clearInterval(carouselTimer); }

        function celebrate() {
            if (isCelebrated) return;
            isCelebrated = true;
            document.getElementById('question-area').style.display = 'none';
            document.getElementById('success-screen').style.display = 'block';
            beforeMusic.pause();
            afterMusic.play().catch(() => {});
            resumeCarousel();
            confetti({ particleCount: 150, spread: 70, origin: { y: 0.6 } });
        }

        function sendWhatsApp() {
            const num = "91XXXXXXXXXX"; // YOUR NUMBER: COUNTRY CODE + NUMBER
            const msg = "I saw the website... It's a YES! ‚ù§Ô∏è";
            window.open(`https://wa.me/${num}?text=${encodeURIComponent(msg)}`, '_blank');
        }

        // Floating Hearts Background
        setInterval(() => {
            const h = document.createElement('div');
            h.className = 'heart-particle';
            h.innerHTML = '‚ù§Ô∏è';
            h.style.left = Math.random() * 100 + 'vw';
            h.style.fontSize = (Math.random() * 15 + 10) + 'px';
            h.style.position = 'fixed';
            h.style.bottom = '-20px';
            h.style.opacity = '0.4';
            h.animate([{transform: 'translateY(0)'}, {transform: 'translateY(-110vh)'}], {duration: 4000});
            document.getElementById('hearts-bg').appendChild(h);
            setTimeout(() => h.remove(), 4000);
        }, 500);
    </script>
</body>
</html>